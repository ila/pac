# name: test/sql/pac_compiler.test
# description: basic pac_compiler smoke tests (dummy outputs)
# group: [sql]

require pac

statement ok
PRAGMA remove_pac_privacy_unit('t_single');

statement ok
PRAGMA remove_pac_privacy_unit('t_left');

statement ok
PRAGMA remove_pac_privacy_unit('t_right');

statement ok
DROP TABLE IF EXISTS t_single;

statement ok
DROP TABLE IF EXISTS t_left;

statement ok
DROP TABLE IF EXISTS t_right;

# Test 1: single table with GROUP BY
statement ok
CREATE TABLE t_single(group_key VARCHAR, val DOUBLE, cnt INTEGER);

statement ok
INSERT INTO t_single VALUES ('A', 10.0, 3), ('A', 11.0, 3), ('B', 20.0, 3);

# Register as protected table (compiler path that expects a privacy unit)
statement ok
PRAGMA add_pac_privacy_unit('t_single');

# query I
# SELECT group_key, SUM(val) AS sum_val, SUM(cnt) AS sum_cnt
# FROM t_single
# GROUP BY group_key
# ORDER BY group_key;
# ----
# DUMMY

statement ok
PRAGMA remove_pac_privacy_unit('t_single');

